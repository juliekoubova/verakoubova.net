{% set left = img.left | lang | item(imageBase) %}
{% set right = img.right | lang | item(imageBase) %}

{% if left and right %}
  {% set blockWidth = ' sm:w-1/3' %}
{% elif left or right %}
  {% set blockWidth = ' sm:w-1/2' %}
{% else %}
  {% set blockWidth = '' %}
{% endif %}

{% if left and not right %}
{%   set objectAlign = 'sm:object-left-top' %}
{% elif right and not left %}
{%   set objectAlign = 'sm:object-right-top' %}
{% else %}
{%  set objectAlign = 'sm:object-top' %}
{% endif %}

{% set blockClass = 'snap-start sm:snap-none pt-20 pb-12 sm:pt-0 sm:pb-0 h-screen sm:h-auto sm:max-h-full' + blockWidth %}

{% set leftClass = left.data.class | lang %}
{% set leftHtml = left.templateContent if left.templateContent else left %}

{% set rightClass = right.data.class | lang %}
{% set rightHtml = right.templateContent if right.templateContent else right %}

<div class="flex flex-col justify-center sm:h-full sm:mx-auto sm:max-w-2xl lg:max-w-4xl">
  <div class="sm:flex max-h-full">
    {% if left %}
    <div class="{{ blockClass }} {{ leftClass }}">
      {{ leftHtml | safe }}
    </div>
    {% endif %}

    <div class="sm:mx-4 {{ blockClass }} flex-1">
      {% from 'macros.njk' import image %}
      {{ image(
              img,
              imageBase | ensureTrailingSlash,
              class='object-scale-down h-full w-full ' + objectAlign,
              lazy=(loop.index > 2)
        ) }}
    </div>

    {% if right %}
    <div class="{{ blockClass }} {{ rightClass }}">
      {{ rightHtml | safe }}
    </div>
    {% endif %}
  </div>
</div>