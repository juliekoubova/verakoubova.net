{% macro image(img, base = '', class = '') %}
{% if img %}
{% set src = base | lang + img.src | lang %}
  <img
    class="{{ class }}"
    alt="{{ img.alt | lang }}"
    src="{{ src | url }}"
    loading="lazy"
  >
{% endif %}
{% endmacro %}

{% macro youtube(id, width, height) %}
{% set aspectRatio = height / width %}
{% set paddingBottom = aspectRatio * 100 | round(2) %}
<div class="vr-base mt-2" data-controller="vr">
  <div class="relative overflow-hidden" style="padding-bottom: {{ paddingBottom }}%;">
    <iframe
      class="absolute top-0 left-0 w-full h-full"
      width="{{ wihth }}" height="{{ height }}"
      src="https://www.youtube.com/embed/{{ id }}"
      frameborder="0"
      allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    >
    </iframe>
  </div>
</div>
{% endmacro %}

{% macro figure(img, base, align='top') %}
  {% if img.caption %}
  <div class="flex flex-col h-full">
    <div class="flex-auto">
  {% endif %}
    {{
      image(
        img,
        base,
        'object-scale-down h-full w-full sm:object-align-' + align
      )
    }}
  {% if img.caption %}
    </div>
    <div class="flex-none">{{ img.caption | lang }}</div>
  </div>
  {% endif %}
{% endmacro %}