{% from 'macros.njk' import image %}

{% for img in gallery.images %}
  {% set left = img.left | lang | itemContent(gallery.imageBase) | trim %}
  {% set right = img.right | lang | itemContent(gallery.imageBase) | trim %}
  {% set leftClass = 'hidden sm:block' if not left %}
  {% set rightClass = 'hidden sm:block' if not right %}
  <li
    {% if loop.first %}
    data-target="SnapYMandatory.determineBy"
    {% else %}
    data-title="{{ img | lang }}"
    id="{{ img | lang | slug }}"
    {% endif %}

    class="sm:h-screen sm:flex sm:snap-start items-center pt-16 pb-12 md:pt-40 md:pb-32"
    >
    <div class="h-screen sm:h-full flex-auto snap-start sm:snap-none {{ leftClass }}">{{ left | safe }}</div>

    <div class="h-screen sm:h-full flex-grow-1 snap-start sm:snap-none md:mx-4">
      {{ image(
              img,
              gallery.imageBase | ensureTrailingSlash,
              class='object-scale-down h-full'
        ) }}
    </div>

    <div class="h-screen sm:h-full flex-auto snap-start sm:snap-none {{ rightClass }}">{{ right | safe }}</div>
  </li>
{% endfor %}