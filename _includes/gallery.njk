{% from 'macros.njk' import image %}

<ol>
{% for img in gallery.images %}
  {% set left = img.left | lang | itemContent(gallery.imageBase) | trim %}
  {% set right = img.right | lang | itemContent(gallery.imageBase) | trim %}
  {% set blockClass = 'h-screen pt-24 pb-2 sm:pt-32 pb-16 sm:h-full flex-auto snap-start sm:snap-none' %}
  {% set leftClass = 'hidden sm:block' if not left %}
  {% set rightClass = 'hidden sm:block' if not right %}
  <li
    class="sm:h-screen sm:flex sm:snap-start items-center"
    data-title="{{ img | lang }}"
    id="{{ img | lang | slug }}"

    {% if loop.first %}
    data-navigation-ignore
    {% endif %}
    >
    <h3 class="sr-only">{{ item | lang }}</h3>

    {% if left %}
    <div class="{{ blockClass }} {{ leftClass }}">{{ left | safe }}</div>
    {% endif %}

    <div
      class="{{ blockClass }} md:mx-4"

      {% if loop.first %}
      data-target="snap-type.determineBy"
      {% endif %}
    >
      {{ image(
              img,
              gallery.imageBase | ensureTrailingSlash,
              class='object-scale-down h-full'
        ) }}
    </div>

    {% if right %}
    <div class="{{ blockClass }} {{ rightClass }}">{{ right | safe }}</div>
    {% endif %}
  </li>
{% endfor %}
</ol>